trigger:
  branches:
    include:
      - dev

pool:
  vmImage: 'ubuntu-latest'

stages:
- stage: Build
  displayName: 'Build Stage'
  
  jobs:
  - job: InstallDependencies
    displayName: 'Install Dependencies'
    steps:
    - script: |
        python3 -m pip install --upgrade pip
        pip install -r requirements.txt
      displayName: 'Install Python Dependencies'

  - job: Linting
    displayName: 'Lint Python Code'
    steps:
    - script: |
        pip install pylint
        pylint *.py
      displayName: 'Run pylint on Python code'

  # - job: UnitTesting
  #   displayName: 'Run Unit Tests'
  #   steps:
  #   - script: |
  #       pip install pytest
  #       pytest *.py
  #     displayName: 'Run Pytest'

  # - job: PackageDockerImage
  #   displayName: 'Package Docker Image'
  #   steps:
  #   - script: |
  #       docker buildx build -t alexplayer15/elastic-app .'                    
  #       docker tag alexplayer15/elastic-app:latest alexplayer15/elastic-app:test'
  #       docker push alexplayer15/elastic-app:test'
  #     displayName: 'Build and Push Docker Image'